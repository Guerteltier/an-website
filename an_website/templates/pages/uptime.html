{% extends "../base.html" %}

{% block description %}Diese Webseite läuft bereits {{uptime}}{% end %}

{% block body %}
    {% if not no_3rd_party %}
        <link href="https://fonts.googleapis.com/css?family=Orbitron"
              rel="stylesheet"
              type="text/css">
    {% end %}
    <div class="center">
        Diese Webseite läuft bereits <div id="uptime">{{uptime}}</div>
    </div>

<script>
    const startTime = {{start_time}};
    const uptimeDiv = document.getElementById("uptime");

    function displayUptime() {
        const currentTime = Math.floor(Date.now()/1000);
        const uptime = currentTime - startTime;
        console.log(startTime, currentTime, uptime)
        // divide by 60
        const div_60 = Math.floor(uptime / 60);
        const div_60_60 = Math.floor(div_60 / 60);
        uptimeDiv.innerText = `${Math.floor(div_60_60 / 24)}d ${div_60_60 % 24}h ${div_60 % 60}min ${uptime % 60}s`;
    }
    setTimeout(
        () => {
            displayUptime();
            setInterval(displayUptime, 1000);
        },
        1000 - new Date().getMilliseconds()
    )
</script>
{% end %}


{% block head %}
<style>
    .center {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        font-size: xx-large;
    }
        {% if no_3rd_party %}
    #uptime {
        font-weight: bold;
    }
        {% else %}
    #uptime {
        font-family: 'Orbitron', sans-serif;
    }
        {% end %}
</style>
{% end %}