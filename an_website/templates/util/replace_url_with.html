{% whitespace oneline %}
    {% if replace_url_with is not None and replace_url_with != url %}
<script>
    /* replace the url, without loading the website again */
    (()=>{
        const url = "{% raw replace_url_with.replace('"', "%22") %}";
        if (url !== w.location.href) {
            w.history.replaceState(
                {
                    "stateType": "replaceURL",
                    "origin": w.location.toString(),
                }, "{{title}}", url
            );
        }
    })();
</script>
    {% end %}
